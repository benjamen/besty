import{j as l,k as i,l as f,c as _,m as w,a as x,i as a,n as m,p as r,o as h,b as k,u as b,q as y,s as L}from"./index-C1mvMJ5V.js";const d=l({url:"frappe.auth.get_logged_user",cache:"User",onError(e){e&&e.exc_type==="AuthenticationError"&&i.push({name:"LoginPage"})}});function n(){let o=new URLSearchParams(document.cookie.split("; ").join("&")).get("user_id");return o==="Guest"&&(o=null),o}const s=f({login:l({url:"login",makeParams({email:e,password:o}){return{usr:e,pwd:o}},onSuccess(e){d.reload(),s.user=n(),s.login.reset(),i.replace("/")}}),logout:l({url:"logout",onSuccess(){d.reset(),s.user=n(),i.replace({name:"Home"}),setTimeout(()=>{window.location.reload()},100)}}),user:n(),isLoggedIn:_(()=>!!s.user)}),U={class:"m-3 flex flex-row items-center justify-center"},B=w({__name:"Login",setup(e){function o(c){let t=new FormData(c.target);s.login.submit({email:t.get("email"),password:t.get("password")})}return(c,t)=>{const u=r("Input"),p=r("Button"),g=r("Card");return h(),x("div",U,[a(g,{title:"Login to your FrappeUI App!",class:"w-full max-w-md mt-4"},{default:m(()=>[k("form",{class:"flex flex-col space-y-2 w-full",onSubmit:L(o,["prevent"])},[a(u,{required:"",name:"email",type:"text",placeholder:"johndoe@email.com",label:"User ID"}),a(u,{required:"",name:"password",type:"password",placeholder:"••••••",label:"Password"}),a(p,{loading:b(s).login.loading,variant:"solid"},{default:m(()=>t[0]||(t[0]=[y("Login")])),_:1},8,["loading"])],32)]),_:1})])}}});export{B as default};
