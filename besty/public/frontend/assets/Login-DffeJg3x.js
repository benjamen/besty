import{n as l,q as i,s as f,h as _,x as w,a as x,p as a,y as d,z as r,o as h,d as y,u as k,A as L,l as U}from"./index-DBtPOO_M.js";const m=l({url:"frappe.auth.get_logged_user",cache:"User",onError(e){e&&e.exc_type==="AuthenticationError"&&i.push({name:"LoginPage"})}});function n(){let o=new URLSearchParams(document.cookie.split("; ").join("&")).get("user_id");return o==="Guest"&&(o=null),o}const s=f({login:l({url:"login",makeParams({email:e,password:o}){return{usr:e,pwd:o}},onSuccess(e){m.reload(),s.user=n(),s.login.reset(),i.replace("/")}}),logout:l({url:"logout",onSuccess(){m.reset(),s.user=n(),i.replace({name:"Home"}),setTimeout(()=>{window.location.reload()},100)}}),user:n(),isLoggedIn:_(()=>!!s.user)}),b={class:"m-3 flex flex-row items-center justify-center"},B=w({__name:"Login",setup(e){function o(u){let t=new FormData(u.target);s.login.submit({email:t.get("email"),password:t.get("password")})}return(u,t)=>{const c=r("Input"),p=r("Button"),g=r("Card");return h(),x("div",b,[a(g,{title:"Login to your FrappeUI App!",class:"w-full max-w-md mt-4"},{default:d(()=>[y("form",{class:"flex flex-col space-y-2 w-full",onSubmit:U(o,["prevent"])},[a(c,{required:"",name:"email",type:"text",placeholder:"johndoe@email.com",label:"User ID"}),a(c,{required:"",name:"password",type:"password",placeholder:"••••••",label:"Password"}),a(p,{loading:k(s).login.loading,variant:"solid"},{default:d(()=>t[0]||(t[0]=[L("Login")])),_:1},8,["loading"])],32)]),_:1})])}}});export{B as default};
