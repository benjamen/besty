var B=Object.defineProperty,E=Object.defineProperties;var j=Object.getOwnPropertyDescriptors;var P=Object.getOwnPropertySymbols;var A=Object.prototype.hasOwnProperty,M=Object.prototype.propertyIsEnumerable;var k=(u,t,a)=>t in u?B(u,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):u[t]=a,X=(u,t)=>{for(var a in t||(t={}))A.call(t,a)&&k(u,a,t[a]);if(P)for(var a of P(t))M.call(t,a)&&k(u,a,t[a]);return u},I=(u,t)=>E(u,j(t));import{_ as b,r as d,c as h,o as _,a as p,b as e,w as q,v as H,d as R,F as w,e as $,t as n,f as F,g as D,h as f,i as S,u as G}from"./index-C1mvMJ5V.js";const J={class:"mb-6 flex space-x-4"},K=["value"],O={__name:"SearchSection",setup(u,{emit:t}){const a=t,g=()=>{a("search")},l=d(""),s=d(""),r=d([]),c=h(()=>Array.from(new Set(r.value.map(x=>x.name))));return(x,m)=>(_(),p("div",null,[e("div",J,[q(e("input",{"onUpdate:modelValue":m[0]||(m[0]=v=>l.value=v),type:"text",placeholder:"Search for products...",class:"w-full p-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[H,l.value]]),q(e("select",{"onUpdate:modelValue":m[1]||(m[1]=v=>s.value=v),class:"p-2 border border-gray-300 rounded-lg"},[m[2]||(m[2]=e("option",{value:""},"All Categories",-1)),(_(!0),p(w,null,$(c.value,v=>(_(),p("option",{key:v,value:v},n(v),9,K))),128))],512),[[R,s.value]]),e("button",{onClick:g,class:"py-3 px-6 bg-black text-white rounded-lg font-semibold text-lg"}," Search ")])]))}},W=b(O,[["__scopeId","data-v-d49874fd"]]),Y={class:"flex-1"},Z={class:"text-lg"},ee={class:"text-sm text-gray-600"},te={class:"text-sm text-gray-500"},se={class:"text-sm text-gray-500"},oe={class:"text-sm text-gray-500"},ae={class:"text-sm text-gray-500"},re={class:"text-sm text-gray-500"},ne={class:"flex gap-2"},ce=["onInput","value"],le=["onClick"],ie={__name:"ProductList",setup(u){const t=d([]),a=(g,l)=>{g.quantity=l};return(g,l)=>(_(),p("div",null,[(_(!0),p(w,null,$(t.value,s=>(_(),p("div",{key:s.productname,class:"flex items-center justify-between p-4 bg-gray-50 rounded-lg shadow-sm"},[e("div",Y,[e("strong",Z,n(s.productname),1),e("p",ee,"Price: $"+n(s.current_price),1),e("p",te,"Source: "+n(s.source_site),1),e("p",se,"Category: "+n(s.category),1),e("p",oe,"Size: "+n(s.size),1),e("p",ae,"Unit Price: $"+n(s.unit_price),1),e("p",re,"Unit Name: "+n(s.unit_name),1)]),e("div",ne,[e("input",{onInput:r=>a(s,r),value:s.quantity,type:"number",placeholder:"Qty",class:"w-16 p-2 border border-gray-300 rounded-lg",min:"1"},null,40,ce),e("button",{onClick:r=>g.addToList(s),class:"py-2 px-4 bg-black text-white rounded-lg"}," Add to List ",8,le)])]))),128))]))}},ue=b(ie,[["__scopeId","data-v-a3c5a79d"]]),de={key:0,class:"w-full bg-white p-4 rounded-lg shadow-md"},_e={key:0,class:"space-y-2 mt-4"},pe={class:"flex-1"},ge={class:"text-lg"},ve={class:"text-sm text-gray-600"},me={class:"text-sm text-gray-600"},xe={class:"text-sm text-gray-500"},he={class:"text-sm text-gray-500"},ye={class:"text-sm text-gray-500"},fe={class:"text-sm text-gray-500"},be={class:"text-sm text-gray-500"},Se={class:"flex gap-2"},Le=["onClick"],we={class:"mt-4 text-lg font-bold text-right"},$e={__name:"ShoppingList",setup(u){const t=d([]),a=h(()=>t.value.reduce((s,r)=>s+r.current_price*r.quantity,0).toFixed(2)),g=s=>{t.value=t.value.filter(r=>r.productname!==s.productname)},l=()=>{console.log("Exporting to XLS...")};return(s,r)=>t.value.length?(_(),p("div",de,[r[0]||(r[0]=e("h3",{class:"text-xl font-bold text-gray-900"},"Shopping List",-1)),t.value.length>0?(_(),p("div",_e,[(_(!0),p(w,null,$(t.value,c=>(_(),p("div",{key:c.productname,class:"flex items-center justify-between p-3 bg-gray-50 rounded-lg shadow-sm"},[e("div",pe,[e("strong",ge,n(c.productname),1),e("p",ve,"Price: $"+n(c.current_price),1),e("p",me,"Quantity: "+n(c.quantity),1),e("p",xe,"Source: "+n(c.source_site),1),e("p",he,"Category: "+n(c.category),1),e("p",ye,"Size: "+n(c.size),1),e("p",fe,"Unit Price: $"+n(c.unit_price),1),e("p",be,"Unit Name: "+n(c.unit_name),1)]),e("div",Se,[e("button",{onClick:x=>g(c),class:"py-2 px-4 bg-red-500 text-white rounded-lg"}," Remove ",8,Le)])]))),128))])):F("",!0),e("div",we," Total: $"+n(a.value),1),e("div",{class:"mt-4 text-right"},[e("button",{onClick:l},"Export to XLS")])])):F("",!0)}},Ce=b($e,[["__scopeId","data-v-75b60934"]]),Pe={class:"min-h-screen bg-gray-50 py-8"},ke={class:"max-w-4xl mx-auto px-6 flex"},L=10,Xe={__name:"Home",setup(u){const t=d(""),a=d(""),g=d([]),l=d([]),s=d([]),r=d(0),c=d(!0),x=D({doctype:"Product Item",fields:["productname","current_price","source_site","category","size","unit_price","unit_name"],orderBy:"creation desc",start:0,pageLength:5e4});x.fetch().then(()=>{s.value=x.data||[],m(),c.value=!1}).catch(o=>{console.error("Error fetching product items:",o),c.value=!1}),f(x,o=>{o.data?(s.value=o.data,m(),c.value=!1):console.error("No data received from product items fetch")});const m=()=>{const o=new Set(s.value.map(i=>i.category));g.value=[...o]},v=h(()=>s.value.filter(o=>(o.productname.toLowerCase().includes(t.value.toLowerCase())||o.source_site.toLowerCase().includes(t.value.toLowerCase()))&&(a.value?o.category===a.value:!0))),T=h(()=>Math.ceil(v.value.length/L));h(()=>r.value<T.value-1),h(()=>r.value>0);let C=d([]);f([v,r],([o,i])=>{const y=i*L;C.value=o.slice(y,y+L)}),f(t,()=>{r.value=0}),f(a,()=>{r.value=0});const Q=o=>{const i=l.value.find(y=>y.productname===o.productname);i?i.quantity+=o.quantity||1:l.value.push(I(X({},o),{quantity:o.quantity||1}))},z=o=>{l.value=l.value.filter(i=>i.productname!==o.productname)},N=h(()=>l.value.reduce((o,i)=>o+i.current_price*i.quantity,0).toFixed(2)),U=()=>{const o=XLSX.utils.json_to_sheet(l.value),i=XLSX.utils.book_new();XLSX.utils.book_append_sheet(i,o,"Shopping List"),XLSX.writeFile(i,"shopping_list.xlsx")},V=()=>{r.value=0};return(o,i)=>(_(),p("div",Pe,[e("div",ke,[S(W,{searchQuery:t.value,selectedCategory:a.value,categories:g.value,performSearch:V},null,8,["searchQuery","selectedCategory","categories"]),S(ue,{paginatedProducts:G(C),addToList:Q},null,8,["paginatedProducts"]),S(Ce,{selectedItems:l.value,removeFromList:z,totalPrice:N.value,exportToXLS:U},null,8,["selectedItems","totalPrice"])])]))}},Fe=b(Xe,[["__scopeId","data-v-0ec93c33"]]);export{Fe as default};
